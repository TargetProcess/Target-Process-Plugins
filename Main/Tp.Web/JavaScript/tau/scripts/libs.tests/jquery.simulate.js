define(["libs/jquery/jquery"],function(a){(function(a){a.fn.extend({simulate:function(b,c){return this.each(function(){var d=a.extend({},a.simulate.defaults,c||{});new a.simulate(this,b,d)})}}),a.simulate=function(a,b,c){this.target=a,this.options=c,/^drag$/.test(b)?this[b].apply(this,[this.target,c]):this.simulateEvent(a,b,c)},a.extend(a.simulate.prototype,{simulateEvent:function(a,b,c){var d=this.createEvent(b,c);return this.dispatchEvent(a,b,d,c),d},createEvent:function(a,b){if(/^mouse(over|out|down|up|move)|(dbl)?click$/.test(a))return this.mouseEvent(a,b);if(/^key(up|down|press)$/.test(a))return this.keyboardEvent(a,b)},mouseEvent:function(b,c){var d,e=a.extend({bubbles:!0,cancelable:b!="mousemove",view:window,detail:0,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:undefined},c),f=a(e.relatedTarget)[0];return a.isFunction(document.createEvent)?(d=document.createEvent("MouseEvents"),d.initMouseEvent(b,e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget||document.body.parentNode)):document.createEventObject&&(d=document.createEventObject(),a.extend(d,e),d.button={0:1,1:4,2:2}[d.button]||d.button),d},keyboardEvent:function(b,c){var d,e=a.extend({bubbles:!0,cancelable:!0,view:window,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:0,charCode:0},c);if(a.isFunction(document.createEvent))try{d=document.createEvent("KeyEvents"),d.initKeyEvent(b,e.bubbles,e.cancelable,e.view,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.keyCode,e.charCode)}catch(f){d=document.createEvent("Events"),d.initEvent(b,e.bubbles,e.cancelable),a.extend(d,{view:e.view,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,keyCode:e.keyCode,charCode:e.charCode})}else document.createEventObject&&(d=document.createEventObject(),a.extend(d,e));if(a.browser.msie||a.browser.opera)d.keyCode=e.charCode>0?e.charCode:e.keyCode,d.charCode=undefined;return d},dispatchEvent:function(a,b,c){return a.dispatchEvent?a.dispatchEvent(c):a.fireEvent&&a.fireEvent("on"+b,c),c},drag:function(a){var b=this,c=this.findCenter(this.target),d=this.options,e=Math.floor(c.x),f=Math.floor(c.y),g=d.dx||0,h=d.dy||0,i=this.target,j={clientX:e,clientY:f};this.simulateEvent(i,"mousedown",j),j={clientX:e+1,clientY:f+1},this.simulateEvent(document,"mousemove",j),j={clientX:e+g,clientY:f+h},this.simulateEvent(document,"mousemove",j),this.simulateEvent(document,"mousemove",j),this.simulateEvent(i,"mouseup",j),this.simulateEvent(i,"click",j)},findCenter:function(b){var b=a(this.target),c=b.offset();return{x:c.left+b.outerWidth()/2,y:c.top+b.outerHeight()/2}}}),a.extend(a.simulate,{defaults:{speed:"sync"},VK_TAB:9,VK_ENTER:13,VK_ESC:27,VK_PGUP:33,VK_PGDN:34,VK_END:35,VK_HOME:36,VK_LEFT:37,VK_UP:38,VK_RIGHT:39,VK_DOWN:40})})(a)})